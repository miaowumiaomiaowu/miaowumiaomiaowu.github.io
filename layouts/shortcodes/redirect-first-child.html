{{/* Shortcode: redirect-first-child
     Usage: {{< redirect-first-child >}}
     Behavior: If the current page is a section with no or minimal body and has child pages,
               redirect to the first leaf page (by weight or default order).
*/}}

{{ $all := .Page.RegularPagesRecursive }}
{{ if gt (len $all) 0 }}
  {{ $sorted := $all.ByWeight }}
  {{ if not $sorted }}{{ $sorted = $all }}{{ end }}
  {{ $first := index (first 1 $sorted) 0 }}
  {{ if $first }}
    <p class="text-sm text-gray-500 dark:text-gray-400">正在跳转到子页面：
      <a class="underline" href="{{ $first.RelPermalink }}">{{ $first.Title }}</a>
    </p>
    <script>window.location.replace("{{ $first.RelPermalink }}");</script>
    <noscript><meta http-equiv="refresh" content="0; url={{ $first.RelPermalink }}"></noscript>
  {{ end }}
{{ end }}

